<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>C++实现多维数组</title>
    <url>/2020/05/02/20200502_C++%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<p>在Visual Studio 2010的版本上想要使用多维数组实现一个算法，但是，无奈<code>boost</code>提供的<code>multi_array</code>坑太多，在多维数组降维赋值时经常发生错误，<code>eigen</code>提供的只有二维矩阵，最新版本中有<code>tensor</code>，但在目前的产品代码库里用不了，opencv？太大。。。最后还是自己实现了一个，拿出来，抛砖引玉吧。</p>
<a id="more"></a>

<p>这里用到了<code>C++11</code>列表初始化；如果你的编译器比较旧（没错，我用的就是vs2010），可以使用C语言的<code>stdarg.h</code>进行不定参数解析，当然这里也有些小坑。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="comment">// custom_multi_array.hpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">int</span> Dims&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MultiArray</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	MultiArray() : mTotalDimCnt(<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">memset</span>(mDimCnt, <span class="number">0</span>, <span class="keyword">sizeof</span>(T)*Dims);</span><br><span class="line">	&#125;</span><br><span class="line">	MultiArray(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">size_t</span>&gt; &amp;dimCnt) : mTotalDimCnt(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		SetMemberVariable(dimCnt);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Reset</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">size_t</span>&gt; &amp;dimCnt)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		mTotalDimCnt = <span class="number">1</span>;</span><br><span class="line">		SetMemberVariable(dimCnt);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">size_t</span> <span class="title">GetDimCnt</span><span class="params">(<span class="keyword">size_t</span> dimIdx)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (dimIdx &lt; Dims)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> mDimCnt[dimIdx];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">size_t</span> <span class="title">GetTotalDimCnt</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mTotalDimCnt;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">T *<span class="title">Get</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (mContent.empty())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> &amp;mContent[<span class="number">0</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">const</span> T *<span class="title">Get</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (mContent.empty())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> &amp;mContent[<span class="number">0</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">T &amp;<span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">size_t</span>&gt; &amp;args)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">try</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">size_t</span> idx = GetIndex(args);</span><br><span class="line">			<span class="keyword">return</span> mContent[idx];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span> (<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp;e)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="built_in">std</span>::invalid_argument(e.what());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">const</span> T &amp;<span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">size_t</span>&gt; &amp;args)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">try</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">size_t</span> idx = GetIndex(args);</span><br><span class="line">			<span class="keyword">return</span> mContent[idx];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span> (<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp;e)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="built_in">std</span>::invalid_argument(e.what());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/// Copy constructor</span></span><br><span class="line">	MultiArray&lt;T, Dims&gt;(<span class="keyword">const</span> MultiArray&lt;T, Dims&gt; &amp;lhs)</span><br><span class="line">	&#123;</span><br><span class="line">		mTotalDimCnt = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; Dims; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			mDimCnt[i] = lhs.mDimCnt[i];</span><br><span class="line">			mTotalDimCnt *= mDimCnt[i];</span><br><span class="line">		&#125;</span><br><span class="line">		mContent = lhs.mContent;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/// Assignment constructor</span></span><br><span class="line">	MultiArray&lt;T, Dims&gt; &amp;<span class="keyword">operator</span>=(<span class="keyword">const</span> MultiArray&lt;T, Dims&gt; &amp;lhs)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; Dims; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			mDimCnt[i] = lhs.mDimCnt[i];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (lhs.mTotalDimCnt != mTotalDimCnt)</span><br><span class="line">		&#123;</span><br><span class="line">			mTotalDimCnt = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; Dims; i++)</span><br><span class="line">			&#123;</span><br><span class="line">				mTotalDimCnt *= mDimCnt[i];</span><br><span class="line">			&#125;</span><br><span class="line">			mContent.resize(mTotalDimCnt);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">std</span>::copy(lhs.mContent.<span class="built_in">begin</span>(), lhs.mContent.<span class="built_in">end</span>(), mContent.<span class="built_in">begin</span>());</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetMemberVariable</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">size_t</span>&gt; &amp;dimCnt)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> exceptionPrefix = <span class="string">"GetIndex Exception! "</span>;</span><br><span class="line">		<span class="keyword">if</span> (dimCnt.<span class="built_in">size</span>() == Dims)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; Dims; i++)</span><br><span class="line">			&#123;</span><br><span class="line">				mDimCnt[i] = dimCnt[i];</span><br><span class="line">				mTotalDimCnt *= mDimCnt[i];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (mTotalDimCnt &gt; <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				mContent.resize(mTotalDimCnt, <span class="number">0</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">throw</span> <span class="built_in">std</span>::invalid_argument(exceptionPrefix + <span class="string">"Dimension count error (equal 0)!"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="built_in">std</span>::invalid_argument(exceptionPrefix + <span class="string">"Dimension count size error!"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">size_t</span> <span class="title">GetIndex</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">size_t</span>&gt; &amp;args)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> exceptionPrefix = <span class="string">"GetIndex Exception! "</span>;</span><br><span class="line">		<span class="comment">/// Parameters check</span></span><br><span class="line">		<span class="keyword">if</span> (args.<span class="built_in">size</span>() &gt; Dims || args.empty())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="built_in">std</span>::invalid_argument(exceptionPrefix + <span class="string">"Dimension count size error!"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/// Assign to local variable</span></span><br><span class="line">		<span class="keyword">size_t</span> dimCnt[Dims] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; args.<span class="built_in">size</span>(); i++)</span><br><span class="line">		&#123;</span><br><span class="line">			dimCnt[i] = args[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/// Get current index from args</span></span><br><span class="line">		<span class="keyword">size_t</span> idx = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; Dims; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (dimCnt[i] &gt;= mDimCnt[i])</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">throw</span> <span class="built_in">std</span>::invalid_argument(exceptionPrefix + <span class="string">"Dimension count error!"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// Get current index corresponding element count</span></span><br><span class="line">			<span class="keyword">size_t</span>  t = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">size_t</span> j = i + <span class="number">1</span>; j &lt; Dims; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				t *= mDimCnt[j];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// Updata index</span></span><br><span class="line">			idx += (t * dimCnt[i]);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> idx;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">size_t</span>         mDimCnt[Dims];</span><br><span class="line">	<span class="keyword">size_t</span>         mTotalDimCnt;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;T&gt; mContent;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>主函数，简单的测试和调用示例</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"custom_multi_array.hpp"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/// main.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	&#123; <span class="comment">/// 构造函数</span></span><br><span class="line">		<span class="keyword">try</span></span><br><span class="line">		&#123;</span><br><span class="line">			MultiArray&lt;float, 2&gt; mat2d1(&#123; 1 &#125;);</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Construct success"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span> (<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp; e)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span></span><br><span class="line">		&#123;</span><br><span class="line">			MultiArray&lt;float, 2&gt; mat2d1(&#123; 1, 0 &#125;);</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Construct success"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span> (<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp; e)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span></span><br><span class="line">		&#123;</span><br><span class="line">			MultiArray&lt;float, 2&gt; mat2d1(&#123; 1, 1, 1 &#125;);</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Construct success"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span> (<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp; e)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span></span><br><span class="line">		&#123;</span><br><span class="line">			MultiArray&lt;float, 2&gt; mat2d1(&#123; 1, 1 &#125;);</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Construct success"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span> (<span class="keyword">const</span> <span class="built_in">std</span>::exception&amp; e)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#123; <span class="comment">/// 复制，赋值构造函数</span></span><br><span class="line">		MultiArray&lt;float, 2&gt; mat2d1(&#123; 18, 2 &#125;);</span><br><span class="line">		MultiArray&lt;<span class="keyword">float</span>, <span class="number">2</span>&gt; mat2d2;</span><br><span class="line">		MultiArray&lt;float, 2&gt; mat2d3(&#123; 18, 2 &#125;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/// 复制构造函数</span></span><br><span class="line">		MultiArray&lt;float, 2&gt; mat2d4(mat2d1);</span><br><span class="line">		<span class="comment">/// 赋值构造函数</span></span><br><span class="line">		mat2d2 = mat2d1; <span class="comment">// 大小不等</span></span><br><span class="line">		mat2d3 = mat2d1; <span class="comment">// 大小相等</span></span><br><span class="line">	&#125;</span><br><span class="line">	&#123; <span class="comment">/// 不同维度的赋值</span></span><br><span class="line">		MultiArray&lt;float, 3&gt; mat3d(&#123; 12, 18, 2 &#125;);</span><br><span class="line">		MultiArray&lt;float, 2&gt; mat2d(&#123; 18, 2 &#125;);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">memcpy</span>(mat2d.Get(), &amp;mat3d(&#123; <span class="number">5</span> &#125;), <span class="number">18</span> * <span class="number">2</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	&#123; <span class="comment">/// 遍历输出</span></span><br><span class="line">		MultiArray&lt;float, 2&gt; mat2d(&#123; 18, 2 &#125;);</span><br><span class="line">		<span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">float</span>&gt; <span class="title">vec</span><span class="params">(<span class="number">18</span> * <span class="number">2</span>)</span></span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; <span class="number">18</span>*<span class="number">2</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			vec[i] = i * <span class="number">1.0f</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">memcpy</span>(mat2d.Get(), &amp;vec[<span class="number">0</span>], <span class="number">18</span> * <span class="number">2</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; mat2d.GetDimCnt(<span class="number">0</span>); i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">size_t</span> j = <span class="number">0</span>; j &lt; mat2d.GetDimCnt(<span class="number">1</span>); j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; mat2d(&#123; i, j &#125;) &lt;&lt; <span class="string">"\t"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>编程</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub Pages搭建个人博客</title>
    <url>/2020/05/02/20200502_GitHubPages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<p>使用GitHub搭建个人博客的过程虽然简单，但是期间还是踩过了一些坑，这里简单的记录一下配置的过程，以方便查找。</p>
<a id="more"></a>

<h2 id="GitHub-Pages初始化"><a href="#GitHub-Pages初始化" class="headerlink" title="GitHub Pages初始化"></a>GitHub Pages初始化</h2><h3 id="创建个人的GitHub账号"><a href="#创建个人的GitHub账号" class="headerlink" title="创建个人的GitHub账号"></a>创建个人的GitHub账号</h3><p>如用户名：<code>zhangsan</code></p>
<h3 id="在GitHub账号里新建一个和账号用户名同名的管理仓"><a href="#在GitHub账号里新建一个和账号用户名同名的管理仓" class="headerlink" title="在GitHub账号里新建一个和账号用户名同名的管理仓"></a>在GitHub账号里新建一个和账号用户名同名的管理仓</h3><p>如：<code>zhangsan.github.io</code></p>
<h3 id="设置该仓为GitHub-Page仓，步骤如下："><a href="#设置该仓为GitHub-Page仓，步骤如下：" class="headerlink" title="设置该仓为GitHub Page仓，步骤如下："></a>设置该仓为GitHub Page仓，步骤如下：</h3><ul>
<li><p>在软件仓的主页面点击<code>Setting</code></p>
</li>
<li><p>找到<code>GitHub Pages</code>，点击<code>Choose a theme</code></p>
</li>
<li><p>然后随便选择一个主题，并对更改进行<code>commit</code></p>
</li>
</ul>
<h3 id="在浏览器中输入https-zhangsan-github-io便可以访问网页了。"><a href="#在浏览器中输入https-zhangsan-github-io便可以访问网页了。" class="headerlink" title="在浏览器中输入https://zhangsan.github.io便可以访问网页了。"></a>在浏览器中输入<code>https://zhangsan.github.io</code>便可以访问网页了。</h3><p>但是这样建好的网站并不美观，下面我们使用Hexo提供的框架对网页仓进行优化</p>
<h2 id="使用Hexo框架，Next主题对网站进行优化"><a href="#使用Hexo框架，Next主题对网站进行优化" class="headerlink" title="使用Hexo框架，Next主题对网站进行优化"></a>使用Hexo框架，Next主题对网站进行优化</h2><ul>
<li><p><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">hexo</a></p>
</li>
<li><p><a href="https://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">next</a></p>
</li>
</ul>
<h3 id="安装node-js和Git"><a href="#安装node-js和Git" class="headerlink" title="安装node.js和Git"></a>安装<code>node.js</code>和<code>Git</code></h3><h3 id="Hexo搭建"><a href="#Hexo搭建" class="headerlink" title="Hexo搭建"></a>Hexo搭建</h3><ul>
<li>打开命令行，在node中安装Hexo</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<ul>
<li>在任意目录新建文件夹<code>Blogs</code>，并对该目录进行初始化</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>

<ul>
<li>测试</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g &#x2F;&#x2F; 打包文件</span><br><span class="line">hexo s &#x2F;&#x2F; 启动服务器</span><br></pre></td></tr></table></figure>

<h3 id="更换next主题"><a href="#更换next主题" class="headerlink" title="更换next主题"></a>更换next主题</h3><ul>
<li>在<code>Blogs</code>目录下，输入命令：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;hexo-theme-next.git themes&#x2F;next</span><br></pre></td></tr></table></figure>

<ul>
<li>打开根目录下的<code>_config.yml</code>文件，将theme字段改为next即可</li>
</ul>
<p><strong>注意：</strong></p>
<ul>
<li><p>项目根目录下的<code>_config.yml</code>文件叫作站点配置文件</p>
</li>
<li><p>主题文件夹根目录下的<code>themes/next/_config.yml</code>文件叫作主题配置文件</p>
</li>
</ul>
<h2 id="将本地Hexo部署到GitHub-Pages"><a href="#将本地Hexo部署到GitHub-Pages" class="headerlink" title="将本地Hexo部署到GitHub Pages"></a>将本地Hexo部署到GitHub Pages</h2><h3 id="修改站点配置文件-config-yml"><a href="#修改站点配置文件-config-yml" class="headerlink" title="修改站点配置文件 _config.yml"></a>修改站点配置文件 <code>_config.yml</code></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: &#39;git&#39;</span><br><span class="line">  repo: https:&#x2F;&#x2F;github.com&#x2F;zhangsan&#x2F;zhangsan.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><ul>
<li>在项目根目录下安装Git部署插件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<ul>
<li>部署到GitHub Pages</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g </span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="给next主题添加-标签-等页面"><a href="#给next主题添加-标签-等页面" class="headerlink" title="给next主题添加[标签]等页面"></a>给next主题添加[标签]等页面</h3><p>新建页面：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cd your-hexo-site</span><br><span class="line">$ hexo new page tags</span><br></pre></td></tr></table></figure>

<p>设置页面类型：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">title: 标签</span><br><span class="line">date: 2014-12-22 12:39:04</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>修改菜单：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: &#x2F;</span><br><span class="line">  archives: &#x2F;archives</span><br><span class="line">  tags: &#x2F;tags</span><br></pre></td></tr></table></figure>

<p><strong>特别注意：*</strong></p>
<p><code>Menu</code>如果使用了图标，一定要按照下面的格式设置，小心空格</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: &#x2F;|| home</span><br><span class="line">  #about: &#x2F;about&#x2F;|| user</span><br><span class="line">  tags: &#x2F;tags&#x2F;|| tags</span><br><span class="line">  categories: &#x2F;categories&#x2F;|| th</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>网站搭建</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
</search>
